<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Contributing </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Contributing ">
    <meta name="generator" content="docfx 2.43.2.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h2 id="contributing">Contributing</h2>

<table>
<thead>
<tr>
<th>Component</th>
<th>Build Status</th>
</tr>
</thead>
<tbody>
<tr>
<td>Management Libraries</td>
<td><a href="https://travis-ci.org/Azure/azure-sdk-for-net"><img src="https://travis-ci.org/Azure/azure-sdk-for-net.svg?branch=master" alt="Build Status"></a></td>
</tr>
<tr>
<td>Client Libraries</td>
<td><a href="https://dev.azure.com/azure-sdk/public/_build/latest?definitionId=41&amp;branchName=master"><img src="https://dev.azure.com/azure-sdk/public/_apis/build/status/41?branchName=master" alt="Build Status"></a></td>
</tr>
</tbody>
</table>
<h3 id="prerequisites">Prerequisites:</h3>
<p>Install VS 2017 (Professional or higher) and make sure you have the latest updates (<a href="https://www.visualstudio.com/">https://www.visualstudio.com/</a>).</p>
<h3 id="to-build">To build:</h3>
<p>=======</p>
<h4 id="if-you-are-building-from-vs-add-a-nuget-feed-source-that-points-to--root-toolslocalnugetfeed-directory">If you are building from VS, add a nuget feed source that points to &lt; root &gt;\tools\LocalNugetFeed directory</h4>
<ol>
<li>Open any solution, eg &quot;Compute\Microsoft.Azure.Management.Compute.sln&quot;</li>
<li>Build solution from VS</li>
</ol>
<h4 id="full-build-from-command-line">Full Build from command line</h4>
<ol>
<li>Open VS 2017 developer command prompt</li>
<li>Navigate to repository root directory</li>
<li>Invoke <strong>msbuild</strong> build.proj /t:Build
will Build</li>
</ol>
<h5 id="build-without-any-scope-will-build-all-management-sdks"><em>Build</em> without any scope will build all management SDK's.</h5>
<h4 id="build-single-sdk">Build single SDK</h4>
<p><code>msbuild build.proj /t:CreateNugetPackage /p:scope=Compute</code></p>
<h3 id="to-run-tests">To run tests:</h3>
<p>Using Visual Studio:</p>
<ul>
<li>Build project in VS</li>
<li>&quot;Test Explorer&quot; window will get populated with tests. Right click on a test that you wish to Run/Debug.</li>
</ul>
<p>Using the command line:
msbuild .\build.proj /t:Runtests /p:Scope=Compute
in the above example RunTests will build and run tests for Compute only
or you can use command line CLI
dotnet test Compute\Microsoft.Azure.Management.Compute\tests\Microsoft.Azure.Management.Tests.csproj</p>
<h4 id="create-single-nuget-package">Create single nuget package</h4>
<p>In order to build one package and run it's test
<code>msbuild build.proj /t:CreateNugetPackage /p:scope=Compute</code>
Nuget package will be created in root directory under \artifacts\packages\Debug (default configuration is Debug)</p>
<h3 id="non-windows-command-line-build">Non-Windows command line build</h3>
<p>Now you can use the same command on non-windows as above
for e.g. on Ubuntu you can do something like below:
<code>dotnet msbuild build.proj /t:Build /p:scope=Compute</code>
<code>dotnet msbuild build.proj /t:RunTests /p:scope=Compute</code>
<code>dotnet msbuild build.proj /t:CreateNugetPackage /p:scope=Compute</code></p>
<h3 id="update-build-tools">Update build tools</h3>
<p>Build tools are now downloaded as part of a nuget package under root\restoredPackages\microsoft.internal.netsdkbuild.mgmt.tools
If for any reason there is an update to the build tools, you will then need to first delete directory root\restoredPackages\microsoft.internal.netsdkbuild.mgmt.tools and reexecute your build command. This will simply get the latest version of build tools.</p>
<h2 id="to-on-board-new-libraries">To on-board new libraries</h2>
<h3 id="project-structure">Project Structure</h3>
<p>In &quot;sdk&lt; Service Name &gt;&quot;, you will find projects for services that have already been implemented</p>
<ul>
<li>The easiest way is to model your test/sdk project using existing test/sdk project
<ul>
<li>Make a copy of existing csproj and change the meta data relevant to your SDK</li>
<li>This ensures the SDK that will be generated will be consistent (including consistent target frameworks)</li>
</ul>
</li>
<li>Each service contains a project for their generated/customized code
<ul>
<li>The folder 'Generated' contains the generated code</li>
<li>The folder 'Customizations' contains additions to the generated code - this can include additions to the generated partial classes, or additional classes that augment the SDK or</li>
</ul>
</li>
</ul>
<h3 id="standard-process">Standard Process</h3>
<ol>
<li>Create fork of <a href="https://github.com/azure/azure-rest-api-specs">Azure REST API Specs</a></li>
<li>Create fork of <a href="https://github.com/azure/azure-sdk-for-net">Azure SDK for .NET</a></li>
<li>Create your Swagger specification for your HTTP API. For more information see
<a href="http://swagger.io">Introduction to Swagger - The World's Most Popular Framework for APIs</a></li>
<li>Install the latest version of AutoRest and use it to generate your C# client. For more info on getting started with AutoRest,
see the <a href="https://github.com/Azure/autorest">AutoRest repository</a></li>
<li>Create a branch in your fork of Azure SDK for .NET and add your newly generated code to your project. If you don't have a project in the SDK yet, look at some of the existing projects and build one like the others.</li>
<li><strong>MANDATORY</strong>: Add or update tests for the newly generated code.</li>
<li>Once added to the Azure SDK for .NET, build your local package using command
e.g.
<code>msbuild build.proj /t:CreateNugetPackage /p:scope=Compute</code></li>
<li>A Pull request of your Azure SDK for .NET changes against <strong>master</strong> branch of the <a href="https://github.com/azure/azure-sdk-for-net">Azure SDK for .NET</a></li>
<li>Both the pull requests will be reviewed and merged by the Azure SDK team</li>
</ol>
<h3 id="new-resource-provider">New Resource Provider</h3>
<ol>
<li>If you have never created an SDK for your service before, you will need the following things to get your SDK in the repo</li>
<li>Follow the standard process described above.</li>
<li>Directory names helps in using basic heuristics in finding projects as well it's associated test projects during CI process.</li>
<li>Create a new directory (name of your service e.g. Compute, Storage etc)</li>
<li>For e.g. for management plane SDKs the following directory structure</li>
</ol>
<ul>
<li><code>&lt;RPName&gt;\&lt;packageName&gt;\src\Microsoft.Azure.Management.&lt;RPName&gt;\Microsoft.Azure.Management.&lt;RPName&gt;.csproj</code></li>
<li><code>&lt;RPName&gt;\&lt;packageName&gt;\tests\Microsoft.Azure.Management.&lt;RPName&gt;.Tests.csproj</code></li>
</ul>
<ol start="7">
<li>Copy .csproj from any other .csproj and update the following information in the new .csproj</li>
</ol>
<ul>
<li>PackageId</li>
<li>Description</li>
<li>AssemblyTitle</li>
<li>AssemblyName</li>
<li>Version</li>
<li>PackageTags</li>
<li>PackageReleaseNotes (this is important because this information is displayed on <a href="http://www.nuget.org">www.nuget.org</a> when your nuget package is published</li>
</ul>
<ol start="8">
<li>Copy existing generate.ps1 file from another dirctory and update the <code>ResourceProvider</code> name that is applicable to your SDK. Resource provider refers to the relative path of your REST spec directory in Azure-Rest-Api-Specs repository
During SDK generation, this path helps to locate the REST API spec from the <code>https://github.com/Azure/azure-rest-api-specs</code></li>
</ol>
<h3 id="code-review-process">Code Review Process</h3>
<p>Before a pull request will be considered by the Azure SDK team, the following requirements must be met:</p>
<ul>
<li>Prior to issuing the pull request:
<ul>
<li>All code must have completed any necessary legal signoff for being publicly viewable (Patent review, JSR review, etc.)</li>
<li>The changes cannot break any existing functional/unit tests that are part of the central repository.
<ul>
<li>This includes all tests, even those not associated with the given feature area.</li>
</ul>
</li>
<li>Code submitted must have basic unit test coverage, and have all the unit tests pass. Testing is the full responsibility of the service team
<ul>
<li>Functional tests are encouraged, and provide teams with a way to mitigate regressions caused by other code contributions.</li>
</ul>
</li>
<li>Code should be commented.</li>
<li>Code should be fully code reviewed.</li>
<li>Code should be able to merge without any conflicts into the dev branch being targeted.</li>
<li>Code should pass all relevant static checks and coding guidelines set forth by the specific repository.</li>
<li>All build warnings and code analysis warnings should be fixed prior to submission.</li>
</ul>
</li>
<li>As part of the pull request (aka, in the text box on GitHub as part of submitting the pull request):
<ul>
<li>Proof of completion of the code review and test passes requirements above.</li>
<li>Identity of QA responsible for feature testing (can be conducted post-merging of the pull request).</li>
<li>Short description of the payload of pull request.</li>
</ul>
</li>
<li>After the pull request is submitted:
<ul>
<li>Our SLA is 48 hours. When your PR is submitted someone on our team will be auto assigned the PR for review. No need to email us</li>
<li>MS internal folks, please reach out to us via our slack channel or</li>
<li>Send an email to the Azure DevEx .Net team (azdevxdotnet@microsoft.com) alias.
<ul>
<li>Include all interested parties from your team as well.</li>
<li>In the message, make sure to acknowledge that the legal signoff process is complete.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Once all of the above steps are met, the following process will be followed:</p>
<ul>
<li>A member of the Azure SDK team will review the pull request on GitHub.</li>
<li>If the pull request meets the repository's requirements, the individual will approve the pull request, merging the code into the dev branch of the source repository.
<ul>
<li>The owner will then respond to the email sent as part of the pull request, informing the group of the completion of the request.</li>
</ul>
</li>
<li>If the request does not meet any of the requirements, the pull request will not be merged, and the necessary fixes for acceptance will be communicated back to the partner team.</li>
</ul>
<h3 id="adding-tests">Adding Tests</h3>
<p>Regarding the test project, one thing that's important is to name the test project by adding a &quot;.Tests&quot; suffix to the folder name for the folder containing your project. For example, the test project for &quot;Compute\Management.Compute&quot; should be named 'Compute.Tests'</p>
<ul>
<li>This is for improving CI performance so to find exactly one copy of your test assembly.</li>
<li>Also, due to test dependencies, the test project should build both .NET 4.5.2 and NETStandard 1.4. For example, check out &quot;src\SDKs\Resource\Resource.tests&quot;</li>
</ul>
<h3 id="client-library-tested-oss-and-net-versions">Client Library Tested OSs and .NET Versions</h3>
<table>
<thead>
<tr>
<th></th>
<th>Linux (Ubuntu 16.04)</th>
<th>MacOS 10.13</th>
<th>Windows Server 2016</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>.NET Core 2.1</strong></td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody>
</table>
<h3 id="issues-with-generated-code">Issues with Generated Code</h3>
<p>Much of the SDK code is generated from metadata specs about the REST APIs. Do not submit PRs that modify generated code. Instead,</p>
<ul>
<li>File an issue describing the problem,</li>
<li>Refer to the the <a href="https://github.com/azure/autorest">AutoRest project</a> to view and modify the generator, or</li>
<li>Add additional methods, properties, and overloads to the SDK by adding classes in the 'Customizations' folder of a project</li>
</ul>
<p><img src="https://azure-sdk-impressions.azurewebsites.net/api/impressions/azure-sdk-for-net%2FREADME.png" alt="Impressions"></p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/chidozieononiwu/azure-sdk-for-net/blob/GenerateDocsForGitHub/docfx_project/articles/CONTRIBUTING.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
